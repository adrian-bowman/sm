#         Technical details for the sm library

Installation
------------

To install from within R:

      setwd("~/research/sm2.2-5.7-not-yet-released")
      system("R CMD build sm")
      install.packages("sm_2.2-5.7.tar.gz", repos = NULL, type = "source")

To install from GitHub from within R:

						remotes::install_github("adrian-bowman/sm/sm")

To install from a terminal:

      cd ~/research/sm2.2-5.7-not-yet-released/
      R CMD build sm
      R CMD INSTALL sm_2.2-5.7.tar.gz


Submission to CRAN
------------------

Consider what R version should apply, in the description file.

Update the history, ChangeLog, NAMESPACE, CITATION, DESCRIPTION and
sm help files as required.  Don't forget the short message which appears
in zzz.R.

The checking procedure is invoked by 

      R CMD build sm
      R CMD CHECK --as-cran sm_2.2-5.7.tar.gz

If data needs to be saved more efficiently, then this should be
      R CMD build --resave-data sm

A Windows binary version can be created by uploading this file to
      win-builder.r-project.org/

Submission to CRAN
------------------

See upload web page:
      https://cran.r-project.org/submit.html









To explore Fortran issues
-------------------------

gfortran -arch x86_64 -fno-common -g -O2 -c -fPIC doublePrecision.f90 -o doublePrecision.o
gfortran -arch x86_64 -fno-common -g -O2 -c -fPIC cov_bin_functions.f90 -o cov_bin_functions.o
gfortran -arch x86_64 -fno-common -g -O2 -c -fPIC cov_bin_fun.f90 -o cov_bin_fun.o
cd fnlib
cat dgamma.f d1mach.f d9lgmc.f dcsevl.f dgamlm.f fdump.f i1mach.f initds.f j4save.f xercnt.f xerhlt.f xermsg.f xerprn.f xersve.f xgetua.f > ../dg.f
cd ..
gfortran -arch x86_64 -fno-common -g -O2 -c -fPIC dg.f -o dg.o
rm covbin.so
R CMD SHLIB -o covbin.so dg.o cov_bin_functions.o doublePrecision.o cov_bin_fun.o

gfortran -arch x86_64 -fno-common -g -O2 -c -fPIC variogram.f90 -o variogram.o



cd /Volumes/adrian/research/sm/sm2.2-5.4-not-yet-released
cd sm/src
for f in *.f; do base=`basename $f .f`; mv $f $base.f90; done
cat *.f90 >> variogram.f
rm *.f90
mv variogram.f variogram.f90
Edit out the module definitions and references

cd ../..
R CMD INSTALL sm

Old notes when Fortran was required
-----------------------------------

Reinstate the src directory and sm.density.3d in density.r.

useDynLib statement in NAMESPACE has been commented out.
Is this for the Fortran code?

Remember that the routines.o and sm.so files should be removed
from sm/src, otherwise the checking process will give a warning.

Remember that the routines.o and sm.so files should be removed
from before the creation of the tar file.

      rm sm/src/routines.o
      rm sm/src/sm.so
